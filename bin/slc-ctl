#!/usr/bin/env ruby
known_hosts = %w(palace)
given_host = ARGV.shift

if given_host == 'all'
  given_host = known_hosts
elsif known_hosts.include?(given_host)
  given_host = [given_host]
else
  puts "Unknown host '#{given_host}'"
  given_host = nil
end

if given_host
  given_host.each do |host|
    cmd = [
      'slc ctl',
      '-C', "http://#{host}:hiwu-#{host}@#{host}.server.hiwu.ren",
      ARGV
    ].join(' ')
    puts "Command: #{cmd}"
    system(cmd)
  end
else
  puts <<-END_OF_DOC
usage: slc-ctl host [command ...]

Known hosts:
    all       iterate over all known hosts
  END_OF_DOC
  known_hosts.each do |host|
    puts <<-END_OF_DOC
    #{host}
    END_OF_DOC
  end
end
