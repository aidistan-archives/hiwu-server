#!/usr/bin/env ruby

if ARGV.empty? || ARGV[0] == '-h' || ARGV == '--help'
  puts 'This bin script will transform'
  puts '  bin/pm2-deploy ENV [COMMAND]'
  puts 'into'
  puts '  pm2 deploy pm2.ENV.json ENV [COMMAND]'
  puts
  puts 'The original help message of `pm2 deploy` shows below:'
  system('pm2 deploy help')
else
  cmd = "pm2 deploy pm2.#{ARGV[0]}.json #{ARGV.map(&:inspect).join(' ')}"
  puts "Command: #{cmd}"
  system(cmd)
end
