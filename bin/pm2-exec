#!/usr/bin/env ruby

if ARGV.empty? || ARGV[0] == '-h' || ARGV == '--help'
  puts 'This bin script will transform'
  puts '  bin/pm2-exec COMMAND'
  puts 'into'
  puts '  pm2 deploy pm2.production.json production exec COMMAND'
else
  env = ARGV.shift
  cmd = "pm2 deploy pm2.#{env}.json #{env} exec #{ARGV.join(' ').inspect}"
  puts "Command: #{cmd}"
  system(cmd)
end
